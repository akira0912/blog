# 环境变量工程化

前端的环境变量用的最多的大概就是根据不同的环境去打包，不用一个个修改ip。

## **antd pro umi的环境变量。**

创建一个UMI_ENV的环境变量，根据这个变量打包生产不同的dist文件，同时在浏览器标签上标注是测试环境还是开发环境。

![image.png](/./antd-design/663aead48f614b989839c0da05b61750~tplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.webp) 创建三个config文件

```js
import { defineConfig } from 'umi';

export default defineConfig({
  define: {
    API_URL: 'http://192.168.85.47:9900',
    'process.env.UMI_ENV': process.env.UMI_ENV,
  },
});
```

![image.png](/./antd-design/093e39b4680d4cd683c63c0b24a87923~tplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.webp) 创建三个config文件

`ProLayout`自定义`title`

```js
//自定义title
pageTitleRender: (_, __, info) => {
    let title = '';
    if (process.env.UMI_ENV === 'dev') {
    title = '（开发环境）';
    } else if (process.env.UMI_ENV === 'test') {
    title = '（测试环境）';
    }
    return info?.title + title;
},
```

title变了

![image.png](/./antd-design/0ced1ce0c3114515af5aaa6358120223~tplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.webp)

## **vue2项目的环境变量**

也是在package.json对应命令里添加环境变量，然后添加对应的.env文件 VUE*APP_API_URL=[api.example.com](https://link.juejin.cn?target=http%3A%2F%2Fapi.example.com 'http://api.example.com') （以 `VUE_APP*` 开头的变量会被Vue CLI自动注入到应用程序的 `process.env` 中，在Vue组件或代码中，可以通过 `process.env.VUE_APP_API_URL` 访问这个环境变量的值。）

还是直接看vuecli的官方文档更有性价比……

![image.png](/./antd-design/e5610013b35b4db58f540304067759b3~tplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.webp)

![image.png](/./antd-design/3676774d05404ff687adf938f234aa2c~tplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.webp)
